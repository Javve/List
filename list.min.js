(function(e,t){"use strict";var n=e.document,r;var i=function(e,i,s){var o=this,u,a,f,l,c,p,d={updated:[]};this.listContainer=typeof e=="string"?n.getElementById(e):e;if(!this.listContainer)return;this.items=[];this.visibleItems=[];this.matchingItems=[];this.searched=false;this.filtered=false;this.list=null;this.templateEngines={};this.page=i.page||200;this.i=i.i||1;a={start:function(e,t){t.plugins=t.plugins||{};this.classes(t);u=new c(o,t);this.callbacks(t);this.items.start(e,t);o.update();this.plugins(t.plugins)},classes:function(e){e.listClass=e.listClass||"list";e.searchClass=e.searchClass||"search";e.sortClass=e.sortClass||"sort"},callbacks:function(e){o.list=r.getByClass(e.listClass,o.listContainer,true);r.addEvent(r.getByClass(e.searchClass,o.listContainer),"keyup",o.search);p=r.getByClass(e.sortClass,o.listContainer);r.addEvent(p,"click",o.sort)},items:{start:function(e,n){if(n.valueNames){var r=this.get(),i=n.valueNames;if(n.indexAsync){this.indexAsync(r,i)}else{this.index(r,i)}}if(e!==t){o.add(e)}},get:function(){var e=o.list.childNodes,n=[];for(var r=0,i=e.length;r<i;r++){if(e[r].data===t){n.push(e[r])}}return n},index:function(e,t){for(var n=0,r=e.length;n<r;n++){o.items.push(new l(t,e[n]))}},indexAsync:function(e,t){var n=e.splice(0,100);this.index(n,t);if(e.length>0){setTimeout(function(){a.items.indexAsync(e,t)},10)}else{o.update()}}},plugins:function(e){var t={templater:u,init:a,initialItems:f,Item:l,Templater:c,sortButtons:p,events:d,reset:g};for(var n=0;n<e.length;n++){e[n][1]=e[n][1]||{};var r=e[n][1].name||e[n][0];o[r]=o.plugins[e[n][0]].call(o,t,e[n][1])}}};this.add=function(e,n){if(n){v(e,n)}var r=[],i=false;if(e[0]===t){e=[e]}for(var s=0,u=e.length;s<u;s++){var a=null;if(e[s]instanceof l){a=e[s];a.reload()}else{i=o.items.length>o.page?true:false;a=new l(e[s],t,i)}o.items.push(a);r.push(a)}o.update();return r};var v=function(e,t,n){var r=e.splice(0,100);n=n||[];n=n.concat(o.add(r));if(e.length>0){setTimeout(function(){v(e,t,n)},10)}else{o.update();t(n)}};this.show=function(e,t){this.i=e;this.page=t;o.update()};this.remove=function(e,t,n){var r=0;for(var i=0,s=o.items.length;i<s;i++){if(o.items[i].values()[e]==t){u.remove(o.items[i],n);o.items.splice(i,1);s--;r++}}o.update();return r};this.get=function(e,t){var n=[];for(var r=0,i=o.items.length;r<i;r++){var s=o.items[r];if(s.values()[e]==t){n.push(s)}}if(n.length==0){return null}else if(n.length==1){return n[0]}else{return n}};this.sort=function(e,n){var i=o.items.length,s=null,u=e.target||e.srcElement,a="",f=false,l="asc",c="desc",n=n||{};if(u===t){s=e;f=n.asc||false}else{s=r.getAttribute(u,"data-sort");f=r.hasClass(u,l)?false:true}for(var d=0,v=p.length;d<v;d++){r.removeClass(p[d],l);r.removeClass(p[d],c)}if(f){if(u!==t){r.addClass(u,l)}f=true}else{if(u!==t){r.addClass(u,c)}f=false}if(n.sortFunction){n.sortFunction=n.sortFunction}else{n.sortFunction=function(e,t){return r.sorter.alphanum(e.values()[s],t.values()[s],f)}}o.items.sort(n.sortFunction);o.update()};this.search=function(e,n){o.i=1;var r=[],i,s,a,f,l,n=n===t?o.items[0].values():n,e=e===t?"":e,c=e.target||e.srcElement;e=c===t?(""+e).toLowerCase():""+c.value.toLowerCase();l=o.items;e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");u.clear();if(e===""){g.search();o.searched=false;o.update()}else{o.searched=true;for(var h=0,p=l.length;h<p;h++){i=false;s=l[h];f=s.values();for(var d in n){if(f.hasOwnProperty(d)&&n[d]!==null){a=f[d]!=null?f[d].toString().toLowerCase():"";if(e!==""&&a.search(e)>-1){i=true}}}if(i){s.found=true;r.push(s)}else{s.found=false}}o.update()}return o.visibleItems};this.filter=function(e){o.i=1;g.filter();if(e===t){o.filtered=false}else{o.filtered=true;var n=o.items;for(var r=0,i=n.length;r<i;r++){var s=n[r];if(e(s)){s.filtered=true}else{s.filtered=false}}}o.update();return o.visibleItems};this.size=function(){return o.items.length};this.clear=function(){u.clear();o.items=[]};this.on=function(e,t){d[e].push(t)};var m=function(e){var t=d[e].length;while(t--){d[e][t]()}};var g={filter:function(){var e=o.items,t=e.length;while(t--){e[t].filtered=false}},search:function(){var e=o.items,t=e.length;while(t--){e[t].found=false}}};this.update=function(){var e=o.items,t=e.length;o.visibleItems=[];o.matchingItems=[];u.clear();for(var n=0;n<t;n++){if(e[n].matching()&&o.matchingItems.length+1>=o.i&&o.visibleItems.length<o.page){e[n].show();o.visibleItems.push(e[n]);o.matchingItems.push(e[n])}else if(e[n].matching()){o.matchingItems.push(e[n]);e[n].hide()}else{e[n].hide()}}m("updated")};l=function(e,n,r){var i=this,s={};this.found=false;this.filtered=false;var a=function(e,n,r){if(n===t){if(r){i.values(e,r)}else{i.values(e)}}else{i.elm=n;var s=u.get(i,e);i.values(s)}};this.values=function(e,n){if(e!==t){for(var r in e){s[r]=e[r]}if(n!==true){u.set(i,i.values())}}else{return s}};this.show=function(){u.show(i)};this.hide=function(){u.hide(i)};this.matching=function(){return o.filtered&&o.searched&&i.found&&i.filtered||o.filtered&&!o.searched&&i.filtered||!o.filtered&&o.searched&&i.found||!o.filtered&&!o.searched};this.visible=function(){return i.elm.parentNode?true:false};a(e,n,r)};c=function(e,n){if(n.engine===t){n.engine="standard"}else{n.engine=n.engine.toLowerCase()}return new o.constructor.prototype.templateEngines[n.engine](e,n)};a.start(s,i)};i.prototype.templateEngines={};i.prototype.plugins={};i.prototype.templateEngines.standard=function(e,i){function a(e){if(e===t){var r=s.childNodes,o=[];for(var u=0,a=r.length;u<a;u++){if(r[u].data===t){return r[u]}}return null}else if(e.indexOf("<")!==-1){var f=n.createElement("div");f.innerHTML=e;return f.firstChild}else{return n.getElementById(i.item)}}var s=r.getByClass(i.listClass,e.listContainer,true),o=a(i.item),u=this;var f={created:function(e){if(e.elm===t){u.create(e)}}};this.get=function(e,t){f.created(e);var n={};for(var i=0,s=t.length;i<s;i++){var o=r.getByClass(t[i],e.elm,true);n[t[i]]=o?o.innerHTML:""}return n};this.set=function(e,t){f.created(e);for(var n in t){if(t.hasOwnProperty(n)){var i=r.getByClass(n,e.elm,true);if(i){i.innerHTML=t[n]}}}};this.create=function(e){if(e.elm!==t){return}var n=o.cloneNode(true);n.id="";e.elm=n;u.set(e,e.values())};this.remove=function(e){s.removeChild(e.elm)};this.show=function(e){f.created(e);s.appendChild(e.elm)};this.hide=function(e){if(e.elm!==t&&e.elm.parentNode===s){s.removeChild(e.elm)}};this.clear=function(){if(s.hasChildNodes()){while(s.childNodes.length>=1){s.removeChild(s.firstChild)}}}};r={getByClass:function(){if(n.getElementsByClassName){return function(e,t,n){if(n){return t.getElementsByClassName(e)[0]}else{return t.getElementsByClassName(e)}}}else{return function(e,t,r){var i=[],s="*";if(t==null){t=n}var o=t.getElementsByTagName(s);var u=o.length;var a=new RegExp("(^|\\s)"+e+"(\\s|$)");for(var f=0,l=0;f<u;f++){if(a.test(o[f].className)){if(r){return o[f]}else{i[l]=o[f];l++}}}return i}}}(),addEvent:function(e,n){if(n.addEventListener){return function(n,i,s){if(n&&!(n instanceof Array)&&!n.length&&!r.isNodeList(n)&&n.length!==0||n===e){n.addEventListener(i,s,false)}else if(n&&n[0]!==t){var o=n.length;for(var u=0;u<o;u++){r.addEvent(n[u],i,s)}}}}else if(n.attachEvent){return function(n,i,s){if(n&&!(n instanceof Array)&&!n.length&&!r.isNodeList(n)&&n.length!==0||n===e){n.attachEvent("on"+i,function(){return s.call(n,e.event)})}else if(n&&n[0]!==t){var o=n.length;for(var u=0;u<o;u++){r.addEvent(n[u],i,s)}}}}}(this,n),getAttribute:function(e,n){var r=e.getAttribute&&e.getAttribute(n)||null;if(!r){var i=e.attributes;var s=i.length;for(var o=0;o<s;o++){if(n[o]!==t){if(n[o].nodeName===n){r=n[o].nodeValue}}}}return r},isNodeList:function(e){var t=Object.prototype.toString.call(e);if(typeof e==="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(t)&&(e.length==0||typeof e[0]==="object"&&e[0].nodeType>0)){return true}return false},hasClass:function(e,t){var n=this.getAttribute(e,"class")||this.getAttribute(e,"className")||"";return n.search(t)>-1},addClass:function(e,t){if(!this.hasClass(e,t)){var n=this.getAttribute(e,"class")||this.getAttribute(e,"className")||"";n=n+" "+t+" ";n=n.replace(/\s{2,}/g," ");e.setAttribute("class",n)}},removeClass:function(e,t){if(this.hasClass(e,t)){var n=this.getAttribute(e,"class")||this.getAttribute(e,"className")||"";n=n.replace(t,"");e.setAttribute("class",n)}},sorter:{alphanum:function(e,t,n){if(!e){e=" "}if(!t){t=" "}e=e.toString().replace(/&(lt|gt);/g,function(e,t){return t=="lt"?"<":">"});e=e.replace(/<\/?[^>]+(>|$)/g,"");t=t.toString().replace(/&(lt|gt);/g,function(e,t){return t=="lt"?"<":">"});t=t.replace(/<\/?[^>]+(>|$)/g,"");var r=this.chunkify(e.toLowerCase());var i=this.chunkify(t.toLowerCase());for(var s=0;r[s]&&i[s];s++){if(r[s]!==i[s]){var o=Number(r[s]),u=Number(i[s]);if(n){if(o==r[s]&&u==i[s]){return o-u}else{return r[s]>i[s]?1:-1}}else{if(o==r[s]&&u==i[s]){return u-o}else{return r[s]>i[s]?-1:1}}}}return r.length-i.length},chunkify:function(e){var t=[],n=0,r=-1,i=0,s,o;while(s=(o=e.charAt(n++)).charCodeAt(0)){var u=s==45||s==46||s>=48&&s<=57;if(u!==i){t[++r]="";i=u}t[r]+=o}return t}}};e.List=i;e.ListJsHelpers=r})(window)